
print [[
Test usc for the fwkin block.

Log the pose output:

   $ ubx-mq read fwk.pose -p kdl_types

Send joint positions:

   $ ubx-mq write fwk.jnt_pos '{ 1, 1, 1, 1, 1, 1, 1 }' -r 1
]]

return bd.system {
   imports = { "stdtypes", "ptrig", "kdl_types", "fwkin", "mqueue" },

   blocks = {
      { name = "fwk", type="fwkin" },
      { name = "ptrig", type="ubx/ptrig" },
   },

   configurations = {
      {
	 name = "fwk",
	 config = {
	    urdf_file = "robot.urdf",
	    base_link = "base_link",
	    tip_link = "end_effector_link"
	 }
      },
      {
	 name="ptrig",
	 config = {
	   period = {sec=1 },
	   chain0={
	      { b="#fwk" } }
	 }
      },
   },

   connections = {
      { tgt="fwk.jnt_pos", type="ubx/mqueue" },
      { src="fwk.pose", type="ubx/mqueue" },
   },
}
